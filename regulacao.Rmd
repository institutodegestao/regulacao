---
title: "Central de Regulacao Hospitalar - COVID-19"
output:
   flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: scroll
    navbar:
      - { title: "Bases", href: "https://dados.seplag.pe.gov.br/appsr/regulacao_link/", align: right }
    theme: default
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

source('./global.R') # carrega o script global, com bibliotecas e ETL

```

<!--- Inicio Aba UTI por Especialidade -->

UTI {data-icon="fa-adjust"}
===================================== 

Row {data-height=20}
-------------------------------------

```{r carga UTI}
time <- read.csv2('tempo.csv', sep = ';')
colnames(time) <- c('hora_carga')
  
valueBox(value =  tags$p(time$hora_carga, style = "font-size: 100%;"))   
```

<!--- UTI ADUL -->

Row {data-height=60} <!--- UTI ADUL Row 1 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito))), style = "font-size: 125%;"))`

```{r UTI Adulto}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Adulto ', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito))), style = "font-size: 125%;"))`

```{r UTI Adulto RMR}
uti_livre <- leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Adulto RMR', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito))), style = "font-size: 125%;"))`

```{r UTI Adulto INTERIOR}
uti_livre <- leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & tipo_leito4 == 'u1') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Adulto Interior', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 2 -->
-------------------------------------

<!--- UTI ADUL ALFA -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul ALFA}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Alfa ', percent(uti_rel,0)), style = "font-size: 70%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HMG -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul HMG}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HMG') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HMG ', percent(uti_rel,0)), style = "font-size: 70%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL ARMINDO -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul ARMINDO}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Armindo Moura ', percent(uti_rel,0)), style = "font-size: 70%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 3 -->
-------------------------------------

<!--- UTI ADUL BRITES -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul brites}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Brites', percent(uti_rel,0)), style = "font-size: 70%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL CESAC_PAULISTA -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul cesac paulista}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Cesac Paulista', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL CESAC_PRADO -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul cesac prado}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Cesac Prado', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 4 -->
-------------------------------------

<!--- UTI ADUL HAM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul ham}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HAM') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Agamenon', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HC_UFPE -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul hc ufpe}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HC_UFPE') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HC UFPE', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HDHC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hdhc}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Dom Helder', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 5 -->
-------------------------------------

<!--- UTI ADUL HUOC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto huoc}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HUOC', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HM_REC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hmrec}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('PCR Mulher ', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HJM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto HJM}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HJM') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Joao Murilo', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 6 -->
-------------------------------------

<!--- UTI ADUL HRP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adlto hrp}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Reg. Palmares', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HOF -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hof}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Otavio', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HSM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul hsm}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HSM') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Sao Marcos ', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 7 -->
-------------------------------------

<!--- UTI ADUL HTRI -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul htri}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HTRI') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HTRI', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HPR_I -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul hpr_i}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('PCR Aurora', percent(uti_rel,0)), style = "font-size: 60%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HPR_II -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adul hpr_ii}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('PCR Coelhos', percent(uti_rel, 0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 8 -->
-------------------------------------

<!--- UTI ADUL RHP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto rhp}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'RHP') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Portugues', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HSJ -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hsj}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HSJ') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Santa Joana', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HOSPAM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto HOSPAM}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HOSPAM', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 9 -->
-------------------------------------

<!--- UTI ADUL HMV -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hmv}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HMV ', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HML -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hml}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HML') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Maria Lucinda', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HBL -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hbl}

uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HBL') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HBL', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADULTO 10 -->
-------------------------------------

<!--- UTI ADUL UPAE_GNHS -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto upae_gnhs}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('UPAE GNHS', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HGV -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hgv}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Getulio', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL IMIP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto imip}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('IMIP ', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADULTO 11 -->
-------------------------------------

<!--- UTI ADUL HPR_III -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hpr iii}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HPR_III') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('PCR Imbiribeira', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HMSM_AR -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hmsm araripina}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Sta Ma Araripina', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HRA -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hra}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HRA', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADULTO 12 -->
-------------------------------------

<!--- UTI ADUL HRIS -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hris}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Inacio de Sa', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HRRBC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti hrrbc}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Rui de Barros', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HPR_GOI -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hpr_goi}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HPR Goiana', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADULTO 13 -->
-------------------------------------

<!--- UTI ADUL HMP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti hmp}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HMP') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Memorial Petrolina', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
)    
```

<!--- UTI ADUL CSM_LIM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto csm_lm}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'CSM_LIM') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('CSM Limoeiro', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HRDM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti aduto hrdm}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Dom Moura', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADULTO 14 -->
-------------------------------------

<!--- UTI ADUL HSA -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hsa}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HSA') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Santo Amaro', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL HCP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto hcp}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'HCP') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Correia Picanco', percent(uti_rel,0)), style = "font-size: 90%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI ADUL NEUROCARDIO -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti adulto neurocardio}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u1' & hospital == 'NEUROCARDIO') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('NEUROCARDIO ', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI INF 1 -->
-------------------------------------

<!--- UTI INF -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u2') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u2') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u2') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u2') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u2') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u2') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u2') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti infantil}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u2') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u2') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Infantil', percent(uti_rel,0)), style = "font-size: 100%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI INF HCP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti infantil hcp}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u2' & hospital == 'HCP') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HCP ', percent(uti_rel,0)), style = "font-size: 100%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI INF HUOC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti infantil huoc}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HUOC ', percent(uti_rel,0)), style = "font-size: 100%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI NEO -->
-------------------------------------

<!--- UTI NEO -->
### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u4') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u4') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u4') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u4') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u4') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u4') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u4') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r uti neo}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u4') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u4') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Neonatal', percent(uti_rel,0)), style = "font-size: 100%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI NEO IMIP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r}
uti_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper))

uti_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'u4' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('IMIP ', percent(uti_rel,0)), style = "font-size: 100%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- Fim Aba Ocupao Geral UTI -->

<!--- Incio Aba Ocupao Geral Enfermaria -->

Enfermaria {data-icon="fa-adjust"}
===================================== 

Row {data-height=20}
-------------------------------------

```{r carga ENF}
time <- read.csv2('tempo.csv', sep = ';')
colnames(time) <- c('hora_carga')
  
valueBox(value =  tags$p(time$hora_carga, style = "font-size: 100%;"))   

```

<!--- ENF ADUL -->

Row {data-height=60} <!--- ENF ADUL Row 1 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito))), style = "font-size: 125%;"))`

```{r enf adulto}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Enf Adulto ', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL RMR -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito))), style = "font-size: 125%;"))`

```{r enf adulto rmr}
enf_livre <- leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(regiao == 'RMR' & data_ocup == max_dt_sol & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Enf Adulto RMR', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL INTERIOR -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito))), style = "font-size: 125%;"))`

```{r enf adulto interior}
enf_livre <- leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(regiao == 'INTERIOR' & data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito4 == 'e1') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Enf Adulto INTERIOR', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 2 -->
-------------------------------------

<!--- ENF ADUL HUOC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto huoc}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HUOC ', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HGV -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf HGV}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HGV') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Getulio', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HRLJFS -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf HRLJFS}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRLJFS') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Reg. Limoeiro', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 3 -->
-------------------------------------

<!--- ENF ADUL HM_REC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf HM_REC}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HM_REC') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('PCR Mulher', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HRIS -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf HRIS}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Inacio de Sa', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HOSPAM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf hospam}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HOSPAM ', percent(enf_rel,0)), style = "font-size: 90%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 4 -->
-------------------------------------

<!--- ENF ADUL HRDM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf hrdm}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Dom Moura', percent(enf_rel,0)), style = "font-size: 90%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HREC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf hrec}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HREC') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Emilia Camara', percent(enf_rel,0)), style = "font-size: 90%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HPR_II -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf hpr ii}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HPR_II') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('PCR Coelhos ', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 5 -->
-------------------------------------

<!--- ENF ADUL HDHC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adul hdhc}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HDHC') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Dom Helder', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL CESAC_PRADO -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf cesac prado}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'CESAC_PRADO') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Cesac Prado', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HMV -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf hmv}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HMV') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HMV ', percent(enf_rel,0)), style = "font-size: 90%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 6 -->
-------------------------------------

<!--- ENF ADUL ALFA -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto alfa}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'ALFA') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Alfa', percent(enf_rel, 0)), style = "font-size: 90%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL CESAC_PAULISTA -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto cesac paulista}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'CESAC_PAULISTA') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Cesac Paulista', percent(enf_rel, 0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HRP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf hrp}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRP') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Reg. Palmares', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 7 -->
-------------------------------------

<!--- ENF ADUL HRRBC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto hrrbc}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Rui de Barros', percent(enf_rel,0)), style = "font-size: 90%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL UPAE_GNHS -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto upae gnhs}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'UPAE_GNHS') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('UPAE Garanhuns', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL UPAE_PNZ -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto upae pnz}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'UPAE_PNZ') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('UPAE Petrolina', percent(enf_rel,0)), style = "font-size: 90%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 8 -->
-------------------------------------

<!--- ENF ADUL ARMINDO -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf ARMINDO}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'ARMINDO') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Armindo Moura', percent(enf_rel,0)), style = "font-size: 90%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL BRITES -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf brites}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'BRITES') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Brites', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HMSM_AR -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf hmsm_ar}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HMSM_AR') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Sta Ma Araripina', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 9 -->
-------------------------------------

<!--- ENF ADUL HML -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto hml}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HML') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Ma Lucinda', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HOF -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto hof}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HOF') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Otavio', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HPR_I -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto hpr i}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HPR_I') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('PCR Aurora', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 10 -->
-------------------------------------

<!--- ENF ADUL HRA -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto hra}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRA') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HRA', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HBC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto hbc}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HBC') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HBC', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF ADUL Row 11 -->
-------------------------------------

<!--- ENF ADUL HRFB -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto hrfb}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HRFB') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HRFB', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF ADUL HPR_GOI -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf adulto hpr goi}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e1' & hospital == 'HPR_GOI') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HPR Goiana', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF INF -->
-------------------------------------

<!--- ENF INF -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e2') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e2') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e2') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e2') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e2') %>% summarize(total = sum(leito))), style = "font-size: 125%;"))`

```{r}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Enf Ped ', percent(enf_rel,0)), style = "font-size: 100%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF INF HDM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e2' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e2' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e2' & hospital == 'HDM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf infantil hdm}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HDM') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HDM') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Dom Malan', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF INF HUOC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e2' & hospital == 'HUOC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf infantil huoc}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HUOC') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HUOC ', percent(enf_rel,0)), style = "font-size: 100%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF INF 2 -->
-------------------------------------

<!--- ENF INF HOSPAM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e2' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e2' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e2' & hospital == 'HOSPAM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf infantil hospam}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HOSPAM') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HOSPAM ', percent(enf_rel,0)), style = "font-size: 100%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF INF HRDM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e2' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e2' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e2' & hospital == 'HRDM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf inf hrmd}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HRDM') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Dom Moura', percent(enf_rel,0)), style = "font-size: 100%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF INF 3 -->
-------------------------------------

<!--- ENF INF HRRBC -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e2' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e2' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e2' & hospital == 'HRRBC') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf inf hrrbc}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HRRBC') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Rui de Barros', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF INF HRIS -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e2' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e2' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e2' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e2' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e2' & hospital == 'HRIS') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf inf HRIS}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & tipo_leito == 'PEDIATRICO' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Inacio de Sa', percent(enf_rel,0)), style = "font-size: 100%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF OBST -->
-------------------------------------

<!--- ENF OBST -->
### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e3') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e3') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e3') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e3') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e3') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e3') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e3') %>% summarize(total = sum(leito))), style = "font-size: 125%;"))`

```{r enf obst}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & esp_leito == 'SRAG-OBSTETRICO') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & esp_leito == 'SRAG-OBSTETRICO') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Enf Obst ', percent(enf_rel,0)), style = "font-size: 100%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI OBST IMIP -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e3' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e3' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e3' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e3' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e3' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e3' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e3' & hospital == 'IMIP') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r obst imip}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & esp_leito == 'SRAG-OBSTETRICO' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & esp_leito == 'SRAG-OBSTETRICO' & hospital == 'IMIP') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('IMIP ', percent(enf_rel,0)), style = "font-size: 100%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- ENF OBST 1-->
-------------------------------------

<!--- UTI OBST HRIS -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e3' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e3' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e3' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e3' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e3' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e3' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e3' & hospital == 'HRIS') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf obst HRIS}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & esp_leito == 'SRAG-OBSTETRICO' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & esp_leito == 'SRAG-OBSTETRICO' & hospital == 'HRIS') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Inacio de Sa', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- ENF OBST HDM -->

### `r valueBox(value =  tags$p(paste('Dsp ', leito %>% filter(data_ocup == max_dt_sol & tipo_leito4 == 'e3' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Oc ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'OCUPADO' & tipo_leito4 == 'e3' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), 'Li ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'LIVRE' & tipo_leito4 == 'e3' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), 'Rs ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'RESERVADO' & tipo_leito4 == 'e3' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Ag Oc', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'OCUPADO' & tipo_leito4 == 'e3' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), 'Ag Li', leito %>% filter(data_ocup == max_dt_sol & status_leito == 'LEITO AUTOGESTAO' & status_inicial == 'LIVRE' & tipo_leito4 == 'e3' & hospital == 'HDM') %>% summarize(total = sum(leito_oper)), ' | ', 'Bl ', leito %>% filter(data_ocup == max_dt_sol & status_inicial == 'BLOQUEADO' & tipo_leito4 == 'e3' & hospital == 'HDM') %>% summarize(total = sum(leito)) ), style = "font-size: 125%;"))`

```{r enf obst HDM}
enf_livre <- leito %>% filter(data_ocup == max_dt_sol & status_inicial != 'LIVRE' & tipo_leito2 == 'ENFERMARIA' & esp_leito == 'SRAG-OBSTETRICO' & hospital == 'HDM') %>% summarize(total = sum(leito_oper))

enf_total <- leito %>% filter(data_ocup == max_dt_sol & tipo_leito2 == 'ENFERMARIA' & esp_leito == 'SRAG-OBSTETRICO' & hospital == 'HDM') %>% summarize(total = sum(leito_oper))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Dom Malan', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- Fim Aba UTI por Especialidade -->

<!--- Inicio Aba Detalhamento -->

Internacoes {data-icon="fa-first-aid"}
===================================== 

Row {data-height=15}
-------------------------------------

```{r detalhamento atualizacao}
time <- read.csv2('tempo.csv', sep = ';')
colnames(time) <- c('hora_carga')
  
valueBox(value =  tags$p(time$hora_carga, style = "font-size: 100%;"))   
```

Row {data-height=70}
-------------------------------------

```{r detalhamento controles}
dateInput('dataReg', 'Data', value = max_dt_leito, min = min_dt_leito, max = max_dt_leito, format = 'dd/mm/yyyy')

selectizeInput('hospitalInt', 'Hospital', choices = c('GERAL', sort(as.character(unique(leito$hospital)))), selected = 'GERAL')
```

Row {data-height=100}
-------------------------------------

### Internacoes Hoje

```{r}

renderValueBox({
  if(input$hospitalInt == "GERAL") {
int_hoje <- int_pac %>% filter(data_int == input$dataReg & status_sol != 'CANCELADO') %>% summarize(total = sum(int))
}
  else{
int_hoje <- int_pac %>% filter(data_int == input$dataReg & status_sol != 'CANCELADO'& hospital == input$hospitalInt) %>% summarize(total = sum(int))
}
valueBox(int_hoje)
})
```

### Altas Hoje - UTI

```{r}
renderValueBox({
  
  if(input$hospitalInt == "GERAL") {
altas_hoje <- int_pac %>% filter(data_alta == input$dataReg & status_sol != 'CANCELADO' & tipo_leito2 == 'UTI') %>% summarize(total = sum(int))
}

  else{
altas_hoje <- int_pac %>% filter(data_alta == input$dataReg & status_sol != 'CANCELADO' & hospital == input$hospitalInt & tipo_leito2 == 'UTI') %>% summarize(total = sum(int))
}
valueBox(altas_hoje)
})
```

### Altas Hoje - Enfermaria

```{r}
renderValueBox({
  
  if(input$hospitalInt == "GERAL") {
altas_hoje <- int_pac %>% filter(data_alta == input$dataReg & status_sol != 'CANCELADO' & tipo_leito2 != 'UTI') %>% summarize(total = sum(int))
}

  else{
altas_hoje <- int_pac %>% filter(data_alta == input$dataReg & status_sol != 'CANCELADO' & hospital == input$hospitalInt & tipo_leito2 != 'UTI') %>% summarize(total = sum(int))
}
valueBox(altas_hoje)
})
```

### Var. Int. Antontem-Ontem

```{r}
renderValueBox({
if(input$hospitalInt == "GERAL") {
var_int <- int_pac %>% filter(data_int == input$dataReg-1) %>% summarize(total = sum(int)) / int_pac %>% filter(data_int == input$dataReg-2) %>% summarize(total = sum(int)) - 1
}
  else{
var_int <- int_pac %>% filter(data_int == input$dataReg & hospital == input$hospitalInt) %>% summarize(total = sum(int)) / int_pac %>% filter(data_int == input$dataReg-1 & hospital == input$hospitalInt) %>% summarize(total = sum(int)) - 1    
  }
valueBox(percent(var_int, 0))
})
```

Row {data-height=100}
-------------------------------------

### Leitos Ativos

```{r}
renderValueBox({
  
  if(input$hospitalInt == "GERAL") {
leitos <- leito %>% filter(data_ocup == input$dataReg & status_leito != 'BLOQUEADO' & status_leito != 'INATIVO') %>% summarize(total = sum(leito_oper))
}
  
  else {
leitos <- leito %>% filter(data_ocup == input$dataReg & status_leito != 'BLOQUEADO' & status_leito != 'INATIVO' & hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper))
}
valueBox(leitos)
})
```

### Ocup. Total

```{r}

renderValueBox({

  if(input$hospitalInt == "GERAL") {
  
abs_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE') %>% summarize(total = sum(leito_oper))  
  
rel_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE') %>% summarize(total = sum(leito_oper)) / leito %>% filter(data_ocup == input$dataReg & status_inicial != 'BLOQUEADO' & status_inicial != 'INATIVO') %>% summarize(total = sum(leito_oper)) 
}
else {
abs_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper)) 
rel_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE'& hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper)) / leito %>% filter(data_ocup == input$dataReg & status_inicial != 'BLOQUEADO' & status_inicial != 'INATIVO'& hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper)) 
}

  valueBox(
  paste(abs_leitosOcup, ' | ', percent(rel_leitosOcup,0)),   color = ifelse(rel_leitosOcup > 0.95, "danger", ifelse(rel_leitosOcup > 0.85, 'warning', "success")))
})
```

### Ocup. - Enf.

```{r}
renderValueBox({
if(input$hospitalInt == "GERAL") {
abs_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & tipo_leito2 != 'UTI') %>% summarize(total = sum(leito_oper))
rel_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & tipo_leito2 != 'UTI') %>% summarize(total = sum(leito_oper)) / leito %>% filter(data_ocup == input$dataReg & status_inicial != 'BLOQUEADO' & status_inicial != 'INATIVO' & tipo_leito2 != 'UTI') %>% summarize(total = sum(leito_oper)) 
}
  
  else {
abs_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & tipo_leito2 != 'UTI' & hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper))
rel_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & tipo_leito2 != 'UTI' & hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper)) / leito %>% filter(data_ocup == input$dataReg & status_inicial != 'BLOQUEADO' & status_inicial != 'INATIVO' & tipo_leito2 != 'UTI' & hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper)) 
}
valueBox(
  paste(abs_leitosOcup,' |',percent(rel_leitosOcup,0)), color = ifelse(rel_leitosOcup > 0.95, "danger", ifelse(rel_leitosOcup > 0.85, 'warning', "success")))
})
```

### Ocup. - UTI

```{r}
renderValueBox({

if(input$hospitalInt == "GERAL") {
abs_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & tipo_leito2 == 'UTI') %>% summarize(total = sum(leito_oper))
rel_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & tipo_leito2 == 'UTI') %>% summarize(total = sum(leito_oper)) / leito %>% filter(data_ocup == input$dataReg & status_inicial != 'BLOQUEADO' & status_inicial != 'INATIVO' & tipo_leito2 == 'UTI') %>% summarize(total = sum(leito_oper)) 
}
  else{
abs_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & tipo_leito2 == 'UTI'& hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper))
    
rel_leitosOcup <- leito %>% filter(data_ocup == input$dataReg & status_inicial != 'LIVRE' & tipo_leito2 == 'UTI'& hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper)) / leito %>% filter(data_ocup == input$dataReg & status_inicial != 'BLOQUEADO' & status_inicial != 'INATIVO' & tipo_leito2 == 'UTI'& hospital == input$hospitalInt) %>% summarize(total = sum(leito_oper)) 
}
valueBox(
  paste(abs_leitosOcup,' | ',percent(rel_leitosOcup,0)), color = ifelse(rel_leitosOcup > 0.95, "danger", ifelse(rel_leitosOcup > 0.85, 'warning', "success")))    
})
```

Row {data-height=100}
-------------------------------------

### Erro Busca Geral

```{r}
valueBox(paste(exameErro, ' | ', txExameErro), color = ifelse(exameErro > 0.15, "danger", ifelse(txExameErro > 0.10, 'warning', "success")))
```

### Exames Coletados UTI

```{r}
exameSim <- exame %>% filter(tipo_leito_reg2 == 'UTI' & (exames == 'SIM' | exames == 'CONFIRMADO' | exames == 'DESCARTADO')) %>% summarize(total = sum(paciente))

tx_exame <- exame %>% filter(tipo_leito_reg2 == 'UTI' & (exames == 'SIM' | exames == 'CONFIRMADO' | exames == 'DESCARTADO')) %>% summarize(total = sum(paciente)) / exame %>% filter(tipo_leito_reg2 == 'UTI') %>% summarize(total = sum(paciente))

valueBox(paste(exameSim , ' | ', percent(tx_exame,0)), color = ifelse(tx_exame < 0.80, "danger", ifelse(tx_exame < 0.90, 'warning', "success")))
```

### SRAG UTI - OBITO

```{r}
abs_covid <- exame %>% filter(tipo_leito_reg2 == 'UTI' & desfecho == 'OBITO') %>% summarize(total = sum(paciente))

rel_covid <- exame %>% filter(tipo_leito_reg2 == 'UTI' & desfecho == 'OBITO') %>% summarize(total = sum(paciente)) / exame %>% filter(tipo_leito_reg2 == 'UTI') %>% summarize(total = sum(paciente))

valueBox(paste(abs_covid,' | ',percent(rel_covid,0)), color = ifelse(rel_covid < 0.1, "danger", ifelse(rel_covid < 0.2, 'warning', "success")))
```

### COVID-19 UTI

```{r}
abs_covid <- exame %>% filter(tipo_leito_reg2 == 'UTI' & resultado == 'CONFIRMADO') %>% summarize(total = sum(paciente))

rel_covid <- exame %>% filter(tipo_leito_reg2 == 'UTI' & resultado == 'CONFIRMADO') %>% summarize(total = sum(paciente)) / exame %>% filter(tipo_leito_reg2 == 'UTI') %>% summarize(total = sum(paciente))

valueBox(paste(abs_covid,' | ',percent(rel_covid,0)), color = ifelse(rel_covid < 0.1, "danger", ifelse(rel_covid < 0.2, 'warning', "success")))
```

### COVID-19 - OBITO

```{r}
abs_covid <- exame %>% filter(tipo_leito_reg2 == 'UTI' & resultado == 'CONFIRMADO' & desfecho == 'OBITO') %>% summarize(total = sum(paciente))

rel_covid <- exame %>% filter(tipo_leito_reg2 == 'UTI' & resultado == 'CONFIRMADO' & desfecho == 'OBITO') %>% summarize(total = sum(paciente)) / exame %>% filter(tipo_leito_reg2 == 'UTI' & resultado == 'CONFIRMADO') %>% summarize(total = sum(paciente))

valueBox(paste(abs_covid,' | ',percent(rel_covid,0)), color = ifelse(rel_covid < 0.1, "danger", ifelse(rel_covid < 0.2, 'warning', "success")))
```

Row {.tabset .tabset-fade}
-------------------------------------

### Indicadores SRAG

```{r}
x <- int_pac %>% group_by(data_int) %>% filter(status_sol != 'CANCELADO') %>% summarize(internacoes = sum(int))
y <- sol_pac %>% group_by(data_sol) %>% summarize(solicitacoes = sum(sol))

colnames(x)[1] <- 'Data'
colnames(y)[1] <- 'Data'

baseIndicadores <- merge(y, x, by = 'Data', all = TRUE)
baseIndicadores$saldo <- baseIndicadores$solicitacoes - baseIndicadores$internacoes

plotly::plot_ly(data = baseIndicadores) %>%
  plotly::add_trace(
    x = ~Data,
    y = ~solicitacoes,
    type = 'scatter', mode = 'lines',
    textposition = 'outside',
    name = "Solicitacoes",
    line = list(color = "blue"),
    marker = list(color = "blue")
  ) %>%
  plotly::add_trace(
    x = ~Data,
    y = ~internacoes,
    type = 'scatter', mode = 'lines',
    textposition = 'outside',
    name = "Internacoes",
    line = list(color = "red"),
    marker = list(color = "red")
  ) %>%
  plotly::layout(
    title = "Indicadores SRAG",
    yaxis = list(title = "Indicadores"),
    xaxis = list(title = "Data"),
    hovermode = "compare"
  )

```

### Ocupacao - UTI

```{r}
renderPlotly({

  if(input$hospitalInt != "GERAL")
  {  
z1 <- leito %>% group_by(data_ocup) %>% filter(status_inicial != 'LIVRE' & tipo_leito2 == 'UTI' & hospital == input$hospitalInt & data_ocup >= '2020-03-20') %>% summarize(leitos1 = sum(leito_oper))
z2 <- leito %>% group_by(data_ocup) %>% filter(tipo_leito2 == 'UTI' & hospital == input$hospitalInt & data_ocup >= '2020-03-20') %>% summarize(leitos2 = sum(leito_oper))

baseTaxas <- merge(z1, z2, all = TRUE)
baseTaxas$ocupacao <- percent(baseTaxas$leitos1 / baseTaxas$leitos2, 2)
baseTaxas <- baseTaxas[, c(1,4)]
}

  else
{
z1 <- leito %>% group_by(data_ocup) %>% filter(status_inicial != 'LIVRE' & tipo_leito2 == 'UTI' & data_ocup >= '2020-03-20') %>% summarize(leitos1 = sum(leito_oper))
z2 <- leito %>% group_by(data_ocup) %>% filter(tipo_leito2 == 'UTI' & data_ocup >= '2020-03-20') %>% summarize(leitos2 = sum(leito_oper))

baseTaxas <- merge(z1, z2, all = TRUE)
baseTaxas$ocupacao <- percent(baseTaxas$leitos1 / baseTaxas$leitos2, 2)
baseTaxas <- baseTaxas[, c(1,4)]
} 

  plotly::plot_ly(data = baseTaxas) %>%
  plotly::add_trace(
    x = ~data_ocup,
    y = ~ocupacao,
    type = 'scatter', mode = 'lines',
    text = ~paste(as.integer(ocupacao*100),'%'),
    textposition = 'outside',
    name = "Taxa de Ocupacao",
    line = list(color = "blue"),
    marker = list(color = "blue")
  ) %>%
  plotly::layout(
    title = "Taxa de Ocupacao em UTI",
    yaxis = list(title = "Taxa de Ocupacao"),
    xaxis = list(title = "Data"),
    legend = list(x = 0.1, y = 0.9),
    hovermode = "compare"
  )
  
})
```

### Internacoes Gerais por Municipio

```{r}
  intUTI <- int_pac %>% group_by(unidade, municipio2) %>% filter(tipo_leito2 == 'UTI') %>% summarize(UTI = sum(int)) %>% arrange(desc(UTI))
  intENF <- int_pac %>% group_by(unidade, municipio2) %>% filter(tipo_leito2 == 'ENFERMARIA') %>% summarize(Enfermaria = sum(int)) %>% arrange(desc(Enfermaria))
  intUnid <- merge(intUTI, intENF, by = c('unidade', 'municipio2'), all = T)
  intUnid <- intUnid %>% mutate(UTI = replace(UTI,is.na(UTI),0))
  intUnid <- intUnid %>% mutate(Enfermaria = replace(Enfermaria,is.na(Enfermaria),0))
  intUnid$Total <- intUnid$UTI + intUnid$Enfermaria
  intUnid <- intUnid[,c('unidade', 'municipio2', 'UTI', 'Enfermaria', 'Total')]
  
  colnames(intUnid)[2] <- 'municipio'
  
  downloadHandler(
    filename = function() {
      paste("internacoes por municipio_", Sys.Date(), ".csv", sep="")
    },
    content = function(file) {
      write.csv2(intUnid, file)
    },
    outputArgs = list(label = "Download csv")
  )
  
   datatable(intUnid,
      filter = 'top',
      options = list(
scrollY = '200px', paging = FALSE, scrollX = TRUE)
)
```

### Internacoes Ativas por Municipio

```{r}
  intUTI <- int_pac %>% group_by(unidade, municipio2) %>% filter(tipo_leito2 == 'UTI', status_sol =='INTERNADO') %>% summarize(UTI = sum(int)) %>% arrange(desc(UTI))
  intENF <- int_pac %>% group_by(unidade, municipio2) %>% filter(tipo_leito2 == 'ENFERMARIA', status_sol =='INTERNADO') %>% summarize(Enfermaria = sum(int)) %>% arrange(desc(Enfermaria))
  intUnid <- merge(intUTI, intENF, by = c('unidade', 'municipio2'), all = T)
  intUnid <- intUnid %>% mutate(UTI = replace(UTI,is.na(UTI),0))
  intUnid <- intUnid %>% mutate(Enfermaria = replace(Enfermaria,is.na(Enfermaria),0))
  intUnid$Total <- intUnid$UTI + intUnid$Enfermaria
  intUnid <- intUnid[,c('unidade', 'municipio2', 'UTI', 'Enfermaria', 'Total')]
  
  colnames(intUnid)[2] <- 'municipio'
  
  downloadHandler(
    filename = function() {
      paste("internacoes por municipio_", Sys.Date(), ".csv", sep="")
    },
    content = function(file) {
      write.csv2(intUnid, file)
    },
    outputArgs = list(label = "Download csv")
  )
  
   datatable(intUnid,
      filter = 'top',
      options = list(
scrollY = '200px', paging = FALSE, scrollX = TRUE)
)
```

### Leitos por Hospital

```{r}
renderPlotly({
leitoUnidadeUti <- leito %>% group_by(hospital) %>% filter(tipo_leito2 == 'UTI' & status_leito != 'INATIVO' & status_leito != 'BLOQUEADO', data_ocup == input$dataReg) %>% summarize(leitos = sum(leito_oper))

leitoUnidadeEnf <- leito %>% group_by(hospital) %>% filter(tipo_leito2 == 'ENFERMARIA' & status_leito != 'INATIVO' & status_leito != 'BLOQUEADO', data_ocup == max_dt_leito) %>% summarize(leitos = sum(leito_oper))

leitoUnidade <- merge(leitoUnidadeUti, leitoUnidadeEnf, by = 'hospital', all.x = TRUE, all.y = TRUE)

plotly::plot_ly(data = leitoUnidade) %>%
  plotly::add_trace(
    x = ~hospital,
    y = ~leitos.x,
    type = "bar",
    text = ~as.integer(leitos.x),
    textposition = 'outside',
    name = "Leitos de UTI",
    line = list(color = "blue"),
    marker = list(color = "blue")
  ) %>%
  plotly::add_trace(
    x = ~hospital,
    y = ~leitos.y,
    type = "bar",
    text = ~as.integer(leitos.y),
    textposition = 'outside',
    name = "Leitos de Enfermaria",
    line = list(color = "red"),
    marker = list(color = "red")
  ) %>%
  plotly::layout(
    title = paste('Leitos em ', input$dataReg),
    yaxis = list(title = "Leitos"),
    xaxis = list(title = "Hospital"),
    legend = list(x = 0.1, y = 0.9),
    hovermode = "compare"
  )
})
```

### Leitos por Tipo

```{r}
renderPlotly({

  if(input$hospitalInt == "GERAL") {
  leitoTipo <- leito %>% group_by(tipo_leito) %>% filter(status_leito != 'INATIVO' & status_leito != 'BLOQUEADO', data_ocup == input$dataReg) %>% summarize(leitos = sum(leito_oper))
  }
  else{
  leitoTipo <- leito %>% group_by(tipo_leito) %>% filter(status_leito != 'INATIVO' & status_leito != 'BLOQUEADO', data_ocup == input$dataReg& hospital == input$hospitalInt) %>% summarize(leitos = sum(leito_oper))
  }
plotly::plot_ly(data = leitoTipo) %>%
  plotly::add_trace(
    labels = ~tipo_leito,
    values = ~leitos,
    type = "pie",
    textposition = 'outside',
    name = "Leitos por Tipo"
  ) %>%
  plotly::layout(
    title = paste('Leitos por tipo em ', input$dataReg),
    yaxis = list(title = "Leitos"),
    xaxis = list(title = "Tipo")
  )
})
```

### Leitos por Tipo/Hospital

```{r}
  leitoTipo <- leito %>% group_by(tipo_leito3, unidade, situacao = status_inicial, status = status_leito) %>% filter(status_leito != 'INATIVO', data_ocup == max_dt_leito) %>% summarize(leitos = sum(leito))
  leitoTipo <- as.data.frame(leitoTipo)
  
  leitoTipo <- leitoTipo %>% tidyr::pivot_wider(names_from = tipo_leito3, values_from = leitos)
  
  downloadHandler(
    filename = function() {
      paste("leitos_tipo_hospital_", Sys.Date(), ".csv", sep="")
    },
    content = function(file) {
      write.csv2(leitoTipo, file)
    },
    outputArgs = list(label = "Download csv")
  )
  
  datatable(leitoTipo,
      filter = 'top',
      options = list(
scrollY = '200px', paging = FALSE, scrollX = TRUE)
)
```

<!--- Fim Aba Detalhamento -->

<!--- Inicio Aba Detalhamento -->

Solicitacoes {data-icon="fa-ambulance"}
===================================== 

Row {data-height=20}
-------------------------------------

```{r painal solicitacoes atualizacao}
time <- read.csv2('tempo.csv', sep = ';')
colnames(time) <- c('hora_carga')
  
valueBox(value =  tags$p(time$hora_carga, style = "font-size: 100%;"))   
```

Row {data-height=100}
-------------------------------------

### Solicitacoes Hoje

```{r painel solicitacoes sol hoje}
renderValueBox({
valueBox(sol_pac %>% filter(data_sol == input$dataReg) %>% summarize(total = sum(sol)))
})
```

### Solicitacoes Ativas

```{r painel solicitacoes ativas geral}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg) %>% summarize(total = sum(lista))
           )
})
```

### Var. Sol. Antontem-Ontem

```{r}
renderValueBox({
var_sol <- sol_pac %>% filter(data_sol == input$dataReg-1) %>% summarize(total = sum(sol)) / sol_pac %>% filter(data_sol == input$dataReg-2) %>% summarize(total = sum(sol)) - 1

valueBox(percent(var_sol,0))
})
```

Row {data-height=100}
-------------------------------------

### Solicitacoes Ativas UTI

```{r painel solicitacoes ativas uti}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg == 'UTI') %>% summarize(total = sum(lista))
           )
})
```

### Solicitacoes Ativas UTI Adulto

```{r painel solicitacoes ativas uti adulto}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg == 'UTI' & (esp_leito_reg == 'SRAG' | esp_leito_reg == 'SRAG-CARDIOLOGICO' | esp_leito_reg == 'SRAG COVID NEGATIVO') & tipo_leito_reg != 'UTI INFANTIL') %>% summarize(total = sum(lista))
           )
})
```

### Solicitacoes Ativas UTI Pediatrica

```{r painel solicitacoes ativas uti pediatrica}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg == 'UTI' & esp_leito_reg == 'SRAG' & tipo_leito_reg == 'UTI INFANTIL') %>% summarize(total = sum(lista))
           )
})
```

### Solicitacoes Ativas UTI Neo

```{r painel solicitacoes ativas uti neo}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg == 'UTI' & esp_leito_reg == 'SRAG-NEONATOLOGIA' & tipo_leito_reg == 'UTI NEONATAL') %>% summarize(total = sum(lista))
           )
})
```

### Solicitacoes Ativas UTI Obstetrica

```{r painel solicitacoes ativas uti obstetrica}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg == 'UTI' & esp_leito_reg == 'SRAG-OBSTETRICO') %>% summarize(total = sum(lista))
           )
})
```

Row {data-height=100}
-------------------------------------

### Solicitacoes Ativas Enfermaria

```{r painel solicitacoes ativas enf}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg != 'UTI') %>% summarize(total = sum(lista))
           )
})
```

### Solicitacoes Ativas Enfermaria Adulto

```{r painel solicitacoes ativas enf adulto}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg != 'UTI' & tipo_leito_reg != 'PEDIATRICO' & esp_leito_reg != 'SRAG-OBSTETRICO') %>% summarize(total = sum(lista))
           )
})
```

### Solicitacoes Ativas Enfermaria Pediatrica

```{r painel solicitacoes ativas enf pediatrica}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg != 'UTI' & tipo_leito_reg == 'PEDIATRICO') %>% summarize(total = sum(lista))
           )
})
```

### Solicitacoes Ativas Enfermaria Obstetrica

```{r painel solicitacoes ativas enf obstetrica}
renderValueBox({
  valueBox(sol_hist_nova %>% filter(dt_base_sol == input$dataReg & tipo2_leito_reg != 'UTI' & esp_leito_reg == 'SRAG-OBSTETRICO') %>% summarize(total = sum(lista))
           )
})
```

Row {.tabset .tabset-fade}
-------------------------------------

### Ativas por Dia

```{r}
selectizeInput('at_mun', 'Municipio', choices = c('GERAL', sort(as.character(unique(sol_hist_nova$municipio2)))), selected = 'GERAL')

renderPlotly({

  if(input$at_mun == "GERAL") {
  
x <- sol_hist_nova %>% filter(tipo2_leito_reg=='UTI') %>% group_by(data = dt_base_sol) %>%  summarize(UTI = sum(lista))
y <- sol_hist_nova %>% filter(tipo2_leito_reg=='ENFERMARIA') %>% group_by(data = dt_base_sol) %>%  summarize(ENFERMARIA = sum(lista))
z <- merge(x, y, by='data', all = T)
z <- z %>% replace(is.na(.), 0)
  }
  
  else{
  x <- sol_hist_nova %>% filter(tipo2_leito_reg=='UTI' & municipio2==input$at_mun) %>% group_by(data = dt_base_sol) %>%  summarize(UTI = sum(lista))
y <- sol_hist_nova %>% filter(tipo2_leito_reg=='ENFERMARIA' & municipio2==input$at_mun) %>% group_by(data = dt_base_sol) %>%  summarize(ENFERMARIA = sum(lista))
z <- merge(x, y, by='data', all = T)
z <- z %>% replace(is.na(.), 0)  
  }

plotly::plot_ly(data = z) %>%
  plotly::add_trace(
    x = ~data,
    y = ~UTI+ENFERMARIA,
    type = 'bar',
    textposition = 'outside',
    name = "Total",
    line = list(color = "gray"),
    marker = list(color = "gray")
  ) %>%
  plotly::add_trace(
    x = ~data,
    y = ~UTI,
    type = 'scatter', mode = 'lines',
    textposition = 'outside',
    name = "UTI",
    line = list(color = "red"),
    marker = list(color = "red")
  ) %>%
  plotly::add_trace(
    x = ~data,
    y = ~ENFERMARIA,
    type = 'scatter', mode = 'lines',
    textposition = 'outside',
    name = "ENFERMARIA",
    line = list(color = "blue"),
    marker = list(color = "blue")
  ) %>%
  plotly::layout(
    height = 300, 
    yaxis = list(title = "Solicitacoes em fila por dia"),
    xaxis = list(title = "Data"),
    hovermode = "compare"
  )

})
```

### Ativas em aberto no Dia

```{r}
selectizeInput('at_mun_dia', 'Municipio', choices = c('GERAL', sort(as.character(unique(sol_hist_nova$municipio2)))), selected = 'GERAL')

renderPlotly({

  if(input$at_mun == "GERAL") {
  
x <- sol_hist_nova %>% filter(tipo2_leito_reg=='UTI') %>% group_by(data = dt_base_sol) %>%  summarize(UTI = sum(lista_dia))
y <- sol_hist_nova %>% filter(tipo2_leito_reg=='ENFERMARIA') %>% group_by(data = dt_base_sol) %>%  summarize(ENFERMARIA = sum(lista_dia))
z <- merge(x, y, by='data', all = T)
z <- z %>% replace(is.na(.), 0)
  }
  
  else{
  x <- sol_hist_nova %>% filter(tipo2_leito_reg=='UTI' & municipio2==input$at_mun) %>% group_by(data = dt_base_sol) %>%  summarize(UTI = sum(lista_dia))
y <- sol_hist_nova %>% filter(tipo2_leito_reg=='ENFERMARIA' & municipio2==input$at_mun) %>% group_by(data = dt_base_sol) %>%  summarize(ENFERMARIA = sum(lista_dia))
z <- merge(x, y, by='data', all = T)
z <- z %>% replace(is.na(.), 0)  
  }

plotly::plot_ly(data = z) %>%
  plotly::add_trace(
    x = ~data,
    y = ~UTI+ENFERMARIA,
    type = 'bar',
    textposition = 'outside',
    name = "Total",
    line = list(color = "gray"),
    marker = list(color = "gray")
  ) %>%
  plotly::add_trace(
    x = ~data,
    y = ~UTI,
    type = 'scatter', mode = 'lines',
    textposition = 'outside',
    name = "UTI",
    line = list(color = "red"),
    marker = list(color = "red")
  ) %>%
  plotly::add_trace(
    x = ~data,
    y = ~ENFERMARIA,
    type = 'scatter', mode = 'lines',
    textposition = 'outside',
    name = "ENFERMARIA",
    line = list(color = "blue"),
    marker = list(color = "blue")
  ) %>%
  plotly::layout(
    height = 300, 
    yaxis = list(title = "Solicitacoes em fila por dia"),
    xaxis = list(title = "Data"),
    hovermode = "compare"
  )

})
```

### Ativas por Unidade

```{r}
  solUTI <- sol_pac %>% group_by(unidade, municipio2) %>% filter(status_sol == 'AGUARDANDO DISPONIBILIDADE', tipo2 == 'UTI') %>% summarize(UTI = sum(sol)) %>% arrange(desc(UTI))
  solENF <- sol_pac %>% group_by(unidade, municipio2) %>% filter(status_sol == 'AGUARDANDO DISPONIBILIDADE', tipo2 == 'ENFERMARIA') %>% summarize(Enfermaria = sum(sol)) %>% arrange(desc(Enfermaria))
  solUnid <- merge(solUTI, solENF, by = 'unidade', all = T)
  solUnid <- solUnid %>% mutate(UTI = replace(UTI,is.na(UTI),0))
  solUnid <- solUnid %>% mutate(Enfermaria = replace(Enfermaria,is.na(Enfermaria),0))
  solUnid$Total <- solUnid$UTI + solUnid$Enfermaria
  solUnid$municipio <- ifelse(is.na(solUnid$municipio2.x), as.character(solUnid$municipio2.y), as.character(solUnid$municipio2.x))
  solUnid$municipio <- as.factor(solUnid$municipio)
  solUnid <- solUnid[,c('unidade', 'municipio', 'UTI', 'Enfermaria', 'Total')]
  # colnames(solUnid)[2] <- 'municipio'

  downloadHandler(
    filename = function() {
      paste("solicitacoes_ativas_unidade_", Sys.Date(), ".csv", sep="")
    },
    content = function(file) {
      write.csv2(solUnid, file)
    },
    outputArgs = list(label = "Download csv")
  )
  
  datatable(solUnid,
      filter = 'top',
      options = list(
scrollY = '200px', paging = FALSE, scrollX = TRUE)
)
```

### Gerais por Unidade

```{r}

  solUTI <- sol_pac %>% group_by(unidade, municipio2) %>% filter(status_sol != 'CANCELADO', tipo2 == 'UTI') %>% summarize(UTI = sum(sol)) %>% arrange(desc(UTI))
  solENF <- sol_pac %>% group_by(unidade, municipio2) %>% filter(status_sol != 'CANCELADO', tipo2 == 'ENFERMARIA') %>% summarize(Enfermaria = sum(sol)) %>% arrange(desc(Enfermaria))
  solUnid <- merge(solUTI, solENF, by = 'unidade', all = T)
  solUnid <- solUnid %>% mutate(UTI = replace(UTI,is.na(UTI),0))
  solUnid <- solUnid %>% mutate(Enfermaria = replace(Enfermaria,is.na(Enfermaria),0))
  solUnid$Total <- solUnid$UTI + solUnid$Enfermaria
  solUnid$municipio <- ifelse(is.na(solUnid$municipio2.x), as.character(solUnid$municipio2.y), as.character(solUnid$municipio2.x))
  solUnid$municipio <- as.factor(solUnid$municipio)
  solUnid <- solUnid[,c('unidade', 'municipio', 'UTI', 'Enfermaria', 'Total')]
  
downloadHandler(
    filename = function() {
      paste("solicitacoes_gerais_unidade_", Sys.Date(), ".csv", sep="")
    },
    content = function(file) {
      write.csv2(solUnid, file)
    },
    outputArgs = list(label = "Download csv")
  )
  
  datatable(solUnid,
      filter = 'top',
      options = list(
scrollY = '200px', paging = FALSE, scrollX = TRUE)
)
```

### Gerais por Municipio

```{r}

  solUTI <- sol_pac %>% group_by(municipio2) %>% filter(status_sol != 'CANCELADO', tipo2 == 'UTI') %>% summarize(UTI = sum(sol)) %>% arrange(desc(UTI))
  solENF <- sol_pac %>% group_by(municipio2) %>% filter(status_sol != 'CANCELADO', tipo2 == 'ENFERMARIA') %>% summarize(Enfermaria = sum(sol)) %>% arrange(desc(Enfermaria))
  solMun <- merge(solUTI, solENF, by = 'municipio2', all = T)
  solMun <- solMun %>% mutate(UTI = replace(UTI,is.na(UTI),0))
  solMun <- solMun %>% mutate(Enfermaria = replace(Enfermaria,is.na(Enfermaria),0))
  solMun$Total <- solMun$UTI + solMun$Enfermaria
  solMun$Taxa <- solMun$Total / sum(solMun$Total)
  solMun$Taxa <- formattable::percent(solMun$Taxa, 3)
  solMun <- solMun[,c('municipio2', 'UTI', 'Enfermaria', 'Total', 'Taxa')]
  colnames(solMun)[1] <- 'municipio'
  
  downloadHandler(
    filename = function() {
      paste("solicitacoes_gerais_municipio_", Sys.Date(), ".csv", sep="")
    },
    content = function(file) {
      write.csv2(solMun, file)
    },
    outputArgs = list(label = "Download csv")
  )
  
  datatable(solMun,
      filter = 'top',
      options = list(
scrollY = '200px', paging = FALSE, scrollX = TRUE)
) %>% formatPercentage(c("Taxa"), 2)
  
```

### Gerais por GERES

```{r}
renderDT({
  if(input$hospitalInt == "GERAL") {
  solUTI <- sol_pac %>% group_by(geres2) %>% filter(status_sol != 'CANCELADO', tipo2 == 'UTI') %>% summarize(UTI = sum(sol)) %>% arrange(desc(UTI))
  solENF <- sol_pac %>% group_by(geres2) %>% filter(status_sol != 'CANCELADO', tipo2 == 'ENFERMARIA') %>% summarize(Enfermaria = sum(sol)) %>% arrange(desc(Enfermaria))
  solGeres <- merge(solUTI, solENF, by = 'geres2', all = T)
  solGeres <- solGeres %>% mutate(UTI = replace(UTI,is.na(UTI),0))
  solGeres <- solGeres %>% mutate(Enfermaria = replace(Enfermaria,is.na(Enfermaria),0))
  solGeres$Total <- solGeres$UTI + solGeres$Enfermaria
  solGeres$Taxa <- solGeres$Total / sum(solGeres$Total)
  solGeres$Taxa <- formattable::percent(solGeres$Taxa, 3)
  solGeres <- solGeres[,c('geres2', 'UTI', 'Enfermaria', 'Total', 'Taxa')]
  colnames(solGeres)[1] <- 'geres'
  }
  else{
  solUnid <- sol_pac %>% group_by(unidade, municipio2, tipo2) %>% filter(status_sol != 'CANCELADO' & hospital_int == input$hospitalInt) %>% summarize(leitos = sum(sol)) %>% arrange(desc(leitos))
  }
datatable(solGeres, 
          filter = 'top',
          options = list(
scrollY = '200px', paging = FALSE, scrollX = TRUE) 
) %>% formatPercentage(c("Taxa"), 2)
})
```

UTI NAO SUS {data-icon="fa-adjust"}
===================================== 

<!--- UTI NAO-SUS -->

Row {data-height=20}
-------------------------------------

```{r carga UTI nao sus}
valueBox(value =  tags$p(Sys.time(), style = "font-size: 100%;"))   
```

Row {data-height=60} <!--- UTI ADUL Row 1 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% summarize(total = sum(uti_adulto_c19_bl))), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS}
uti_livre <- leitos_privados %>% na.omit() %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Adulto ', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(uti_adulto_c19_bl)) , ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS HMA LTDA}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Memorial Arcoverde ', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(uti_adulto_c19_bl)) , ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS ESPINHEIRO}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Espinheiro', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI NAO-SUS -->

Row {data-height=60} <!--- UTI ADUL Row 2 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS UNIMED III REC}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Unimed III ', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS ESPERANCA S A}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HGMI', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS UNIMED I REC}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Unimed I ', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

<!--- UTI NAO-SUS -->

Row {data-height=60} <!--- UTI ADUL Row 3 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL CIDADE PATRIMONIO') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL CIDADE PATRIMONIO') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL CIDADE PATRIMONIO') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL CIDADE PATRIMONIO') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL CIDADE PATRIMONIO') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS HGMI}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL CIDADE PATRIMONIO') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL CIDADE PATRIMONIO') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Cid Patrimonio', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS SAO MARCOS}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Sao Marcos', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL SAO JOSE') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL SAO JOSE') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL SAO JOSE') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL SAO JOSE') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL MEMORIAL SAO JOSE') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS HOSPITAL MEMORIAL SAO JOSE}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL SAO JOSE') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL SAO JOSE') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Memorial Sao Jose', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 4 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL JAYME DA FONTE') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL JAYME DA FONTE') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL JAYME DA FONTE') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL JAYME DA FONTE') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL JAYME DA FONTE') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS JAYME DA FONTE}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL JAYME DA FONTE') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL JAYME DA FONTE') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Jayme da Fonte', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED CARUARU') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED CARUARU') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED CARUARU') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED CARUARU') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL UNIMED CARUARU') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS HOSPITAL UNIMED CARUARU}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED CARUARU') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED CARUARU') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Unimed Caruaru', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS HOSPITAL SANTA TERESINHA}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Sta Teresinha', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 6 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS ESPERANCA OLINDA}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Esperanca Olinda', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS SANTA JOANA}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Santa Joana', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI ADUL Row 6 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'REAL HOSPITAL PORTUGUES') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'REAL HOSPITAL PORTUGUES') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'REAL HOSPITAL PORTUGUES') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'REAL HOSPITAL PORTUGUES') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'REAL HOSPITAL PORTUGUES') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS PORTUGUES}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'REAL HOSPITAL PORTUGUES') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'REAL HOSPITAL PORTUGUES') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Portugues', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS MONTE SINAI}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Monte Sinai', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(uti_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(uti_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(uti_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI Adulto NAO SUS ILHA DO LEITE}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(uti_adulto_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(uti_adulto_c19_oc+uti_adulto_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Ilha do Leite', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI Inf Row 1 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% summarize(total = sum(uti_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% summarize(total = sum(uti_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% summarize(total = sum(uti_infantil_c19_bl))), style = "font-size: 120%;"))`

```{r UTI infantil NAO SUS}
uti_livre <- leitos_privados %>% na.omit() %>% summarize(total = sum(uti_infantil_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Infantil', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_infantil_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI infantil NAO SUS HOSPITAL ESPERANCA OLINDA}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_infantil_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA OLINDA') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Esperanca Olinda', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'PRONTO SOCORRO INFANTIL JORGE DE MEDEIROS LTDA') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'PRONTO SOCORRO INFANTIL JORGE DE MEDEIROS LTDA') %>% summarize(total = sum(uti_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'PRONTO SOCORRO INFANTIL JORGE DE MEDEIROS LTDA') %>% summarize(total = sum(uti_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'PRONTO SOCORRO INFANTIL JORGE DE MEDEIROS LTDA') %>% summarize(total = sum(uti_infantil_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'PRONTO SOCORRO INFANTIL JORGE DE MEDEIROS LTDA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI infantil NAO SUS PRONTO SOCORRO INFANTIL JORGE DE MEDEIROS LTDA}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'PRONTO SOCORRO INFANTIL JORGE DE MEDEIROS LTDA') %>% summarize(total = sum(uti_infantil_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'PRONTO SOCORRO INFANTIL JORGE DE MEDEIROS LTDA') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Jorge de Medeiros', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI Inf Row 2 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(uti_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(uti_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(uti_infantil_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI infantil NAO SUS HOSPITAL VASCO LUCENA}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(uti_infantil_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Vasco Lucena', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_infantil_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI infantil NAO SUS HOSPITAL GERAL MATERNO INFANTIL HGMI}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_infantil_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('HGMI', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- UTI Inf Row 2 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_infantil_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI infantil NAO SUS SANTA JOANA}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_infantil_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA JOANA') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv))

uti_rel <- uti_livre / uti_total
  
valueBox(value =  tags$p(paste('Santa Joana', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA S A') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA S A') %>% summarize(total = sum(uti_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA S A') %>% summarize(total = sum(uti_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA S A') %>% summarize(total = sum(uti_infantil_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL ESPERANCA S A') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r UTI infantil NAO SUS HOSPITAL ESPERANCA S A}
uti_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA S A') %>% summarize(total = sum(uti_infantil_c19_oc))

uti_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ESPERANCA S A') %>% summarize(total = sum(uti_infantil_c19_oc+uti_infantil_c19_lv))

uti_rel <- uti_livre / uti_total

valueBox(value =  tags$p(paste('Esperanca S A', percent(uti_rel,0)), style = "font-size: 50%;"), color = ifelse(uti_rel > 0.95, "danger", ifelse(uti_rel > 0.85, 'warning', "success"))
         )    
```

ENF NAO SUS {data-icon="fa-adjust"}
===================================== 

Row {data-height=20}
-------------------------------------

```{r carga enf nao sus}
valueBox(value =  tags$p(Sys.time(), style = "font-size: 100%;"))   
```

Row {data-height=60} <!--- enf ADUL Row 1 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% summarize(total = sum(enf_adulto_c19_bl))), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS}
enf_livre <- leitos_privados %>% na.omit() %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Adulto ', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(enf_adulto_c19_bl)) , ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS HMA LTDA}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MEMORIAL ARCOVERDE LTDA') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Memorial Arcoverde ', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(enf_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS UNIMED III REC}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE III') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('UNIMED III ', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

<!--- enf NAO-SUS -->

Row {data-height=60} <!--- enf ADUL Row 2 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(enf_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS UNIMED I REC}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL UNIMED RECIFE I') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('UNIMED I ', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(enf_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS SAO MARCOS}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SAO MARCOS') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('SAO MARCOS ', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(enf_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS HOSPITAL SANTA TERESINHA}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL SANTA TERESINHA') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('SANTA TERESINHA', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- enf ADUL Row 6 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(enf_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS MONTE SINAI}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL MONTE SINAI') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('MONTE SINAI', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(enf_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS ILHA DO LEITE}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL ILHA DO LEITE') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('ILHA DO LEITE', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(enf_adulto_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(enf_adulto_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(enf_adulto_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf Adulto NAO SUS Espinheiro}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(enf_adulto_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL DO ESPINHEIRO') %>% summarize(total = sum(enf_adulto_c19_oc+enf_adulto_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Espinheiro', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Row {data-height=60} <!--- enf Inf Row 1 -->
-------------------------------------

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% summarize(total = sum(enf_infantil_c19_oc+enf_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% summarize(total = sum(enf_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% summarize(total = sum(enf_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% summarize(total = sum(enf_infantil_c19_bl))), style = "font-size: 120%;"))`

```{r enf infantil NAO SUS}
enf_livre <- leitos_privados %>% na.omit() %>% summarize(total = sum(enf_infantil_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% summarize(total = sum(enf_infantil_c19_oc+enf_infantil_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('Infantil', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(enf_infantil_c19_oc+enf_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(enf_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(enf_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(enf_infantil_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf infantil NAO SUS HOSPITAL VASCO LUCENA}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(enf_infantil_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL VASCO LUCENA') %>% summarize(total = sum(enf_infantil_c19_oc+enf_infantil_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('VASCO LUCENA', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

### `r valueBox(value =  tags$p(paste('Total ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(enf_infantil_c19_oc+enf_infantil_c19_lv)), ' | ', 'Oc ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(enf_infantil_c19_oc)), ' | ', 'Li ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(enf_infantil_c19_lv)), ' | ', 'Bl ', leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(enf_infantil_c19_bl)), ' | ', leitos_privados %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% select(time_stamp) %>% as.character.POSIXt), style = "font-size: 120%;"))`

```{r enf infantil NAO SUS HOSPITAL GERAL MATERNO INFANTIL HGMI}
enf_livre <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(enf_infantil_c19_oc))

enf_total <- leitos_privados %>% na.omit() %>% filter(hospital == 'HOSPITAL GERAL MATERNO INFANTIL HGMI') %>% summarize(total = sum(enf_infantil_c19_oc+enf_infantil_c19_lv))

enf_rel <- enf_livre / enf_total
  
valueBox(value =  tags$p(paste('HGMI', percent(enf_rel,0)), style = "font-size: 50%;"), color = ifelse(enf_rel > 0.95, "danger", ifelse(enf_rel > 0.85, 'warning', "success"))
         )    
```

Metadados {data-icon="fa-info"}
=====================================

Row {data-height=80} <!--- Info UTI -->
-------------------------------------

### UTI | Enfermaria | Internacoes | Solicitacoes

* Descricao: Dados de capacidade instalada, capacidade ocupada, internacoes e solicitacoes de leitos sus destinados a pacientes com Sindrome Respiratoria Aguda Grave (SRAG)
* Orgao Responsavel: SERS/SES-PE
* Categorias: Saude. Assistencia Hospitalar e Ambulatorial. Regulacao Hospitalar. 
* Cobertura geografica: Pernambuco
* Cobertura temporal: 03/2020 - Atual
* Granularidade geografica: Municipio
* Granularidade temporal: Dia
* Frequencia de atualizacao: 2h
* Metodologia: Dados extraidos do banco do Sistema Regulador, operacionalizado pela Secretaria Executiva de Regulacao em Saude da Secretaria de Saude de Pernambuco (SERS/SES-PE), a partir de dados informados pelas unidades solicitantes de leitos, pelas centrais de regulacao e pelas unidades executantes de leitos

Row {data-height=80} <!--- Info UTI -->
-------------------------------------

### UTI NAO SUS | ENF NAO SUS

* Descricao: Dados de capacidade instalada e capacidade ocupada de leitos nao sus destinados a pacientes com Sindrome Respiratoria Aguda Grave (SRAG)
* Orgao Responsavel: SERS/SES-PE
* Categorias: Saude. Assistencia Hospitalar e Ambulatorial Regulacao Hospitalar
* Cobertura geografica: Pernambuco
* Cobertura temporal: 05/2020 - Atual
* Granularidade geografica: Unidade Hospitalar
* Granularidade temporal: Dia
* Frequencia de atualizacao: 2h
* Metodologia: Dados extraidos do banco do Sistema Censo de Leitos Hospitalares, operacionalizado pela Secretaria Executiva de Regulacao em Saude da Secretaria de Saude de Pernambuco (SERS/SES-PE), a partir de dados enviados pelas Unidades Hospitalares privadas

Row {data-height=80} <!--- Info UTI -->
-------------------------------------

### Dicionario de Dados
  * **Dsp = Disponiveis** - Leitos operacionais (em funcionamento) disponiveis para a Central Estadual de Leitos. Engloba os leitos ocupados, livres e reservados
  * **Oc = Ocupados** - Leitos operacionais, sob gestao da Central Estadual de de Leitos, que estao ocupados por pacientes
  * **Li = Livres** - Leitos operacionais, sob gestao da Central Estadual de de Leitos, que estao sem pacientes no momento
  * **Rs = Reservados** - Leitos operacionais, sob gestao da Central Estadual de de Leitos, que ja foram reservados para pacientes que se encontram em transito para o leito
  * **Ag Oc = Autogestao ocupado** - Leitos operacionais, sob autogestao do Hospital ou Secretaria Municipal de Saude, que estao ocupados por pacientes
  * **Ag Li = Autogestao livre** - Leitos operacionais, sob autogestao do Hospital ou Secretaria Municipal de Saude, que estao sem pacientes no momento
  * **Bl = Bloqueados** - Leitos nao-operacionais decorrentea de algum problema temporario (quebra de equipamento, falta de RH, etc.). Inclui tambem os leitos que estao com status desatualizado.
  * **Solicitacoes Ativas** - Solicitacoes ja reguladas, em fila, aguardando disponibilidade de leito